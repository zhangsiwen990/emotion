<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=720, height=1280, initial-scale=1.0">
<title>æƒ…ç»ªç®¡ç†å™¨</title>
<style>
  body, html {
    height: 100%;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background-color: #f7f7f7;
    border: 4px solid #333; /* æ·±ç°è‰²è¾¹æ¡† */
  }

  #emotionManager {
    text-align: center;
    width: 100%;
    max-width: 720px;
  }

  #negativeEmotionBtn {
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
    background-color: #f0f0f0;
    border: 1px solid #ccc;
    border-radius: 5px;
    margin-top: 20px;
  }

  #negativeEmotionBtn.disabled {
    background-color: #ccc;
    cursor: not-allowed;
  }

  .progress-container {
    width: 100%;
    background-color: #ddd;
    border-radius: 5px;
    margin: 20px 0;
    overflow: hidden;
  }

  .progress-bar {
    height: 20px;
    background-color: red;
    width: 0%;
    border-radius: 5px;
    transition: width 0.5s ease-in-out;
  }

  .face {
    font-size: 48px; /* è®¾ç½®è¡¨æƒ…å­—ä½“å¤§å° */
    display: block; /* é»˜è®¤æ˜¾ç¤º */
    margin-top: 20px;
  }

  .tissue {
    font-size: 48px; /* è®¾ç½®çº¸å·¾å­—ä½“å¤§å° */
    color: #ffcc00; /* çº¸å·¾é¢œè‰² */
    cursor: grab;
    display: none; /* é»˜è®¤ä¸æ˜¾ç¤º */
    margin-top: 20px;
  }

  .prompt-text {
    display: none;
    font-size: 20px;
    color: #555;
    margin-top: 20px;
  }
</style>
</head>
<body>

<div id="emotionManager">
  <h2>æƒ…ç»ªç®¡ç†å™¨</h2>
  <button id="negativeEmotionBtn">å¢åŠ è´Ÿé¢æƒ…ç»ª</button>
  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>
  <div class="face" id="emotionFace">ğŸ˜ğŸ˜ğŸ˜ğŸ˜</div>
  <div class="tissue" id="tissue" draggable="true">ğŸ§»</div>
  <p class="prompt-text" id="promptText"></p>
  <p id="moodText"></p>
</div>

<script>
  let negativeEmotion = 0;
  const progressBar = document.getElementById('progressBar');
  const emotionFace = document.getElementById('emotionFace');
  const tissue = document.getElementById('tissue');
  const negativeEmotionBtn = document.getElementById('negativeEmotionBtn');
  const promptText = document.getElementById('promptText');
  const moodText = document.getElementById('moodText');
  const emotions = ['ğŸ˜', 'ğŸ˜', 'ğŸ˜', 'ğŸ˜', 'ğŸ˜', 'ğŸ˜', 'ğŸ˜', 'ğŸ˜', 'ğŸ˜”', 'ğŸ˜ ', 'â˜¹ï¸', 'ğŸ˜¢'];

  const moodMessages = [
    'è€å¹´äººåº”è¯¥å»ä¸Šç­ï¼Œå› ä¸ºä»–ä»¬æˆç†Ÿç¨³é‡è¿˜èƒ½æ—©èµ·',
    'ä¸­å¹´äººåº”è¯¥å»ä¸Šå­¦ï¼Œå› ä¸ºä»–ä»¬æ€»æ˜¯åæ‚”å½“åˆè¯»ä¹¦å¤ªå°‘',
    'å°å­©å­åº”è¯¥åœ¨å®¶åšå®¶åŠ¡ï¼Œå› ä¸ºä»–ä»¬ç²¾åŠ›å……æ²›çƒ­çˆ±ç”Ÿæ´»',
    'å¹´è½»äººåº”è¯¥å»å…»è€ï¼Œå› ä¸ºä»–ä»¬æµ‘èº«æ˜¯ç—…å¤©å¤©åš·ç€æƒ³æ­»',
    'ä¸Šç­å’Œè¦é¥­æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼Œè¦é¥­æ˜¯è¡Œè¡Œå¥½ï½ï¼Œä¸Šç­æ˜¯ï¼šè¡Œï¼è¡Œï¼å¥½ï¼',
    'è¦é¥­æ˜¯ï¼šè‡ªç”±ä¸Šç­ï¼›ä¸Šç­æ˜¯ï¼šåˆ°ç‚¹è¦é¥­',
    'è¦é¥­æ˜¯ï¼šçœ‹å¤©æ°”ï¼›ä¸Šç­æ˜¯ï¼šé£é›¨æ— é˜»',
    'è¦é¥­æ˜¯ï¼šå·¥èµ„ç°ç»“ï¼›ä¸Šç­æ˜¯ï¼šå·¥èµ„æœˆç»“',
    'è¦é¥­æ˜¯ï¼šä¸€å¤©èµš1000ï¼›ä¸Šç­æ˜¯ï¼šä¸€å¤©èµš100'
  ];

  negativeEmotionBtn.addEventListener('click', () => {
    if (negativeEmotion === 10 && !tissue.classList.contains('used')) {
      return;
    }
    negativeEmotion = (negativeEmotion + 1) % 11;
    updateProgressBar();
    updateEmotionFace();
    updateMoodText();
  });

  function updateProgressBar() {
    progressBar.style.width = `${negativeEmotion * 10}%`;
  }

  function updateEmotionFace() {
    emotionFace.innerHTML = emotions[negativeEmotion];
    if (negativeEmotion === 10) {
      tissue.style.display = 'block';
      negativeEmotionBtn.classList.add('disabled');
      negativeEmotionBtn.disabled = true;
    } else {
      tissue.style.display = 'none';
      negativeEmotionBtn.classList.remove('disabled');
      negativeEmotionBtn.disabled = false;
    }
  }

  function updateMoodText() {
    moodText.textContent = moodMessages[negativeEmotion];
    moodText.style.display = negativeEmotion > 0 ? 'block' : 'none';
  }

  document.body.addEventListener('dragover', (e) => {
    e.preventDefault();
  });

  document.body.addEventListener('drop', (e) => {
    e.preventDefault();
    if (e.target.id === 'emotionFace' && negativeEmotion === 10) {
      tissue.classList.add('used');
      negativeEmotion = 0;
      updateProgressBar();
      updateEmotionFace();
      tissue.style.display = 'none';
      promptText.style.display = 'block';
      promptText.textContent = 'ä¸å…¶å†…è€—ï¼Œä¸å¦‚å¤§ç¬‘ï½';
    }
  });

  tissue.addEventListener('dragstart', (e) => {
    e.dataTransfer.setData("text/plain", null);
  });
</script>

</body>
</html>
